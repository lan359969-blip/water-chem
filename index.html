<!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>åŠ è¯åŠ æ°¯è®¡ç®—ç³»ç»Ÿ</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
font-family: -apple-system, BlinkMacSystemFont, â€œSegoe UIâ€, Roboto, â€œHelvetica Neueâ€, Arial, sans-serif;
background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
min-height: 100vh;
padding: 16px;
padding-bottom: 80px;
}

.container {
max-width: 800px;
margin: 0 auto;
}

.header {
background: #fff;
padding: 20px;
border-radius: 12px;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
margin-bottom: 20px;
text-align: center;
}

.header h1 {
font-size: 24px;
color: #333;
margin-bottom: 8px;
}

.warning {
background: #fff3cd;
color: #856404;
padding: 12px;
border-radius: 8px;
border-left: 4px solid #ffc107;
font-size: 14px;
margin-top: 12px;
}

.card {
background: #fff;
border-radius: 12px;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
margin-bottom: 20px;
overflow: hidden;
}

.card-header {
background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
color: #fff;
padding: 16px;
font-size: 18px;
font-weight: 600;
display: flex;
align-items: center;
gap: 8px;
}

.card-body {
padding: 16px;
}

.input-group {
margin-bottom: 16px;
}

.input-group label {
display: block;
font-size: 14px;
color: #333;
margin-bottom: 6px;
font-weight: 500;
}

.input-group input {
width: 100%;
height: 44px;
border: 1px solid #ddd;
border-radius: 8px;
padding: 0 12px;
font-size: 16px;
outline: none;
transition: all 0.3s;
}

.input-group input:focus {
border-color: #11998e;
box-shadow: 0 0 0 3px rgba(17, 153, 142, 0.1);
}

.paste-section {
background: #f8f9fa;
padding: 16px;
border-radius: 8px;
margin-bottom: 16px;
}

.paste-section textarea {
width: 100%;
height: 80px;
border: 1px solid #ddd;
border-radius: 8px;
padding: 12px;
font-size: 14px;
resize: vertical;
outline: none;
margin-bottom: 12px;
}

.paste-section textarea:focus {
border-color: #11998e;
box-shadow: 0 0 0 3px rgba(17, 153, 142, 0.1);
}

.btn-group {
display: flex;
gap: 8px;
}

.btn {
flex: 1;
height: 44px;
border: none;
border-radius: 8px;
font-size: 16px;
font-weight: 600;
cursor: pointer;
transition: all 0.2s;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
}

.btn-primary {
background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
color: #fff;
box-shadow: 0 4px 12px rgba(17, 153, 142, 0.3);
}

.btn-primary:active {
transform: scale(0.98);
}

.btn-secondary {
background: #6c757d;
color: #fff;
}

.btn-secondary:active {
transform: scale(0.98);
}

.concentration-grid {
display: grid;
grid-template-columns: 1fr auto;
gap: 12px;
align-items: center;
margin-bottom: 12px;
}

.concentration-grid label {
font-size: 14px;
color: #333;
}

.concentration-grid input {
width: 80px;
height: 40px;
border: 1px solid #ddd;
border-radius: 6px;
text-align: center;
font-size: 16px;
outline: none;
}

.diff-inputs {
display: grid;
grid-template-columns: 1fr;
gap: 12px;
}

.diff-item {
display: flex;
align-items: center;
gap: 8px;
}

.diff-item label {
flex: 1;
font-size: 14px;
color: #555;
}

.diff-item input {
width: 100px;
height: 40px;
border: 1px solid #ddd;
border-radius: 6px;
text-align: center;
font-size: 16px;
outline: none;
}

.diff-item input:focus {
border-color: #11998e;
box-shadow: 0 0 0 2px rgba(17, 153, 142, 0.1);
}

.result-section {
background: #f8f9fa;
padding: 16px;
border-radius: 8px;
margin-top: 16px;
}

.result-section h3 {
font-size: 16px;
color: #333;
margin-bottom: 12px;
}

.result-section textarea {
width: 100%;
min-height: 120px;
border: 1px solid #ddd;
border-radius: 8px;
padding: 12px;
font-size: 15px;
line-height: 1.6;
resize: vertical;
outline: none;
font-family: monospace;
background: #fff;
}

.checkbox-group {
display: flex;
align-items: center;
gap: 8px;
padding: 12px;
background: #fff3cd;
border-radius: 8px;
margin-bottom: 16px;
}

.checkbox-group input[type=â€œcheckboxâ€] {
width: 20px;
height: 20px;
cursor: pointer;
}

.checkbox-group label {
font-size: 15px;
color: #856404;
font-weight: 500;
cursor: pointer;
}

.footer {
text-align: center;
color: #fff;
font-size: 13px;
padding: 20px;
opacity: 0.9;
}

.section-title {
font-size: 16px;
color: #666;
font-weight: 600;
margin: 16px 0 12px 0;
padding-bottom: 8px;
border-bottom: 2px solid #e0e0e0;
}

@media (max-width: 640px) {
body {
padding: 12px;
padding-bottom: 60px;
}

.header h1 {
font-size: 20px;
}

.card-header {
font-size: 16px;
padding: 12px;
}

.diff-item {
flex-direction: column;
align-items: flex-start;
}

.diff-item label {
font-size: 13px;
}

.diff-item input {
width: 100%;
}
}

.success-toast {
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
background: rgba(0, 0, 0, 0.85);
color: #fff;
padding: 16px 32px;
border-radius: 8px;
font-size: 16px;
z-index: 9999;
animation: fadeInOut 2s;
}

@keyframes fadeInOut {
0%, 100% { opacity: 0; }
10%, 90% { opacity: 1; }
}
</style>

</head>
<body>

<div class="container">
  <!-- å¤´éƒ¨ -->
  <div class="header">
    <h1>ğŸ§ª åŠ è¯åŠ æ°¯è®¡ç®—ç³»ç»Ÿ</h1>
    <div class="warning">
      âš ï¸ è¾“å…¥çš„å·®å€¼å‡ä¸ºæ— è§†å°æ•°ç‚¹åçš„æ•´æ•°
    </div>
  </div>

  <!-- å¾®ä¿¡æ•°æ®ç²˜è´´åŒº -->

  <div class="card">
    <div class="card-header">ğŸ“‹ å¾®ä¿¡æ•°æ®å¯¼å…¥</div>
    <div class="card-body">
      <div class="paste-section">
        <textarea id="hiddenTxt" placeholder="å°†å¾®ä¿¡æ•°æ®ç²˜è´´è‡³æ­¤..."></textarea>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="readCpy()">ğŸ” è·å–è¿›æ°´é‡</button>
          <button class="btn btn-secondary" onclick="clean()">ğŸ—‘ï¸ æ¸…ç©º</button>
        </div>
      </div>

```
  <div class="input-group">
    <label>ä¸€äºŒç³»åˆ—è¿›æ°´é‡</label>
    <input type="number" id="12" placeholder="è¯·è¾“å…¥ä¸€äºŒç³»åˆ—çš„æ€»è¿›æ°´é‡">
  </div>
  
  <div class="input-group">
    <label>ä¸‰å››ç³»åˆ—è¿›æ°´é‡</label>
    <input type="number" id="34" placeholder="è¯·è¾“å…¥ä¸‰å››ç³»åˆ—çš„æ€»è¿›æ°´é‡">
  </div>
  
  <div class="input-group">
    <label>äº”å…­ç³»åˆ—è¿›æ°´é‡ï¼ˆæ€»é‡ï¼‰</label>
    <input type="number" id="56" placeholder="è¯·è¾“å…¥äº”å…­ç³»åˆ—çš„æ€»è¿›æ°´é‡">
  </div>

  <div style="background: #e3f2fd; padding: 12px; border-radius: 8px; margin-top: 12px;">
    <div style="font-size: 13px; color: #1976d2; margin-bottom: 8px; font-weight: 500;">
      ğŸ’¡ æ°´é‡åˆ†é…è°ƒèŠ‚ï¼ˆå¯å¾®è°ƒå„ç³»åˆ—å®é™…è¿›æ°´é‡ï¼‰
    </div>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
      <div>
        <label style="font-size: 12px; color: #555;">5-1ç³»è¿›æ°´</label>
        <input type="number" id="water_51" style="width: 100%; height: 36px; border: 1px solid #90caf9; border-radius: 6px; text-align: center; font-size: 14px;">
      </div>
      <div>
        <label style="font-size: 12px; color: #555;">5-2ç³»è¿›æ°´</label>
        <input type="number" id="water_52" style="width: 100%; height: 36px; border: 1px solid #90caf9; border-radius: 6px; text-align: center; font-size: 14px;">
      </div>
      <div>
        <label style="font-size: 12px; color: #555;">6-1ç³»è¿›æ°´</label>
        <input type="number" id="water_61" style="width: 100%; height: 36px; border: 1px solid #90caf9; border-radius: 6px; text-align: center; font-size: 14px;">
      </div>
      <div>
        <label style="font-size: 12px; color: #555;">6-2ç³»è¿›æ°´</label>
        <input type="number" id="water_62" style="width: 100%; height: 36px; border: 1px solid #90caf9; border-radius: 6px; text-align: center; font-size: 14px;">
      </div>
    </div>
    <div style="font-size: 11px; color: #666; margin-top: 8px;">
      æç¤ºï¼šä¿®æ”¹åç³»ç»Ÿä¼šè®°ä½æ¯”ä¾‹ï¼Œä¸‹æ¬¡è‡ªåŠ¨æŒ‰æ­¤æ¯”ä¾‹åˆ†é…
    </div>
  </div>
</div>
```

  </div>

  <!-- åŠ è¯è®¡ç®— -->

  <div class="card">
    <div class="card-header">ğŸ’Š åŠ è¯è®¡ç®—</div>
    <div class="card-body">

```
  <!-- ä¸€æœŸ -->
  <div class="section-title">ä¸€æœŸé…ç½®</div>
  <div class="concentration-grid">
    <label>æ··å‡å‰‚æµ“åº¦ï¼ˆ%ï¼‰</label>
    <input type="number" id="hn_con" value="10" step="0.1">
  </div>
  <div class="concentration-grid">
    <label>åŠ©å‡å‰‚æµ“åº¦ï¼ˆ%ï¼‰</label>
    <input type="number" id="zn_con" value="5" step="0.1">
  </div>

  <div class="section-title">ä¸€æœŸæ··å‡å‰‚å·®å€¼</div>
  <div class="diff-inputs">
    <div class="diff-item">
      <label>1ç³»åˆ—æ··å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="HN_adiff">
    </div>
    <div class="diff-item">
      <label>2ç³»åˆ—æ··å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="HN_bdiff">
    </div>
    <div class="diff-item">
      <label>3ç³»åˆ—æ··å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="HN_cdiff">
    </div>
    <div class="diff-item">
      <label>4ç³»åˆ—æ··å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="HN_ddiff">
    </div>
  </div>

  <div class="section-title">ä¸€æœŸåŠ©å‡å‰‚å·®å€¼</div>
  <div class="diff-inputs">
    <div class="diff-item">
      <label>1ç³»åˆ—åŠ©å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="ZN_adiff">
    </div>
    <div class="diff-item">
      <label>2ç³»åˆ—åŠ©å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="ZN_bdiff">
    </div>
    <div class="diff-item">
      <label>3ç³»åˆ—åŠ©å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="ZN_cdiff">
    </div>
    <div class="diff-item">
      <label>4ç³»åˆ—åŠ©å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="ZN_ddiff">
    </div>
  </div>

  <!-- äºŒæœŸ -->
  <div class="section-title">äºŒæœŸé…ç½®</div>
  <div class="concentration-grid">
    <label>æ··å‡å‰‚æµ“åº¦ï¼ˆ%ï¼‰</label>
    <input type="number" id="hn_con2" value="10" step="0.1">
  </div>
  <div class="concentration-grid">
    <label>åŠ©å‡å‰‚æµ“åº¦ï¼ˆ%ï¼‰</label>
    <input type="number" id="zn_con2" value="5" step="0.1">
  </div>

  <div class="section-title">äºŒæœŸæ··å‡å‰‚å·®å€¼</div>
  <div class="diff-inputs">
    <div class="diff-item">
      <label>5-1æ··å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="HN_ediff1">
    </div>
    <div class="diff-item">
      <label>5-2æ··å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="HN_ediff2">
    </div>
    <div class="diff-item">
      <label>6-1æ··å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="HN_fdiff1">
    </div>
    <div class="diff-item">
      <label>6-2æ··å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="HN_fdiff2">
    </div>
  </div>

  <div class="section-title">äºŒæœŸåŠ©å‡å‰‚å·®å€¼</div>
  <div class="diff-inputs">
    <div class="diff-item">
      <label>5-1åŠ©å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="ZN_ediff1">
    </div>
    <div class="diff-item">
      <label>5-2åŠ©å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="ZN_ediff2">
    </div>
    <div class="diff-item">
      <label>6-1åŠ©å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="ZN_fdiff1">
    </div>
    <div class="diff-item">
      <label>6-2åŠ©å‡å‰‚ä¸ä¸Šæ—¶æ®µå·®å€¼</label>
      <input type="number" id="ZN_fdiff2">
    </div>
  </div>

  <button class="btn btn-primary" style="width: 100%; margin-top: 16px;" onclick="do_cal()">
    ğŸ§® è®¡ç®—åŠ è¯é‡
  </button>

  <div class="result-section">
    <h3>ğŸ“Š è®¡ç®—ç»“æœ</h3>
    <textarea id="result" readonly></textarea>
    <button class="btn btn-primary" style="width: 100%; margin-top: 12px;" onclick="copy()">
      ğŸ“‹ å¤åˆ¶åŠ è¯æ•°æ®
    </button>
  </div>
</div>
```

  </div>

  <!-- åŠ æ°¯è®¡ç®— -->

  <div class="card">
    <div class="card-header">ğŸ§ª åŠ æ°¯è®¡ç®—</div>
    <div class="card-body">

```
  <div class="checkbox-group">
    <input type="checkbox" id="isAdd" value="1">
    <label for="isAdd">å¯ç”¨è¡¥æ°¯è®¡ç®—</label>
  </div>

  <!-- ä¸€æœŸåŠ æ°¯ -->
  <div class="section-title">ä¸€æœŸåŠ æ°¯</div>
  <div class="concentration-grid">
    <label>ä¸€æœŸæœ‰æ•ˆæ°¯ï¼ˆ%ï¼‰</label>
    <input type="number" id="effCL1" step="0.1">
  </div>

  <div class="diff-inputs" style="margin-top: 12px;">
    <div class="diff-item">
      <label>é¢„åŠ æ°¯ä¸€äºŒæµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="PreCL_ABdiff">
    </div>
    <div class="diff-item">
      <label>é¢„åŠ æ°¯ä¸‰å››æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="PreCL_CDdiff">
    </div>
    <div class="diff-item">
      <label>ä¸»åŠ æ°¯ä¸€äºŒæµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="MainCL_ABdiff">
    </div>
    <div class="diff-item">
      <label>ä¸»åŠ æ°¯ä¸‰å››æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="MainCL_CDdiff">
    </div>
  </div>

  <div class="section-title">ä¸€æœŸè¡¥æ°¯ï¼ˆå¯é€‰ï¼‰</div>
  <div class="diff-inputs">
    <div class="diff-item">
      <label>ä¸€ç³»è¡¥æ°¯æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="addCL_Adiff" value="0">
    </div>
    <div class="diff-item">
      <label>äºŒç³»è¡¥æ°¯æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="addCL_Bdiff" value="0">
    </div>
    <div class="diff-item">
      <label>ä¸‰ç³»è¡¥æ°¯æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="addCL_Cdiff" value="0">
    </div>
    <div class="diff-item">
      <label>å››ç³»è¡¥æ°¯æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="addCL_Ddiff" value="0">
    </div>
  </div>

  <!-- äºŒæœŸåŠ æ°¯ -->
  <div class="section-title">äºŒæœŸåŠ æ°¯</div>
  <div class="concentration-grid">
    <label>äºŒæœŸæœ‰æ•ˆæ°¯ï¼ˆ%ï¼‰</label>
    <input type="number" id="effCL2" step="0.1">
  </div>

  <div class="diff-inputs" style="margin-top: 12px;">
    <div class="diff-item">
      <label>5ç³»åˆ—é¢„åŠ æ°¯æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="PreCL_Ediff">
    </div>
    <div class="diff-item">
      <label>6ç³»åˆ—é¢„åŠ æ°¯æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="PreCL_Fdiff">
    </div>
    <div class="diff-item">
      <label>5ç³»åˆ—ä¸»åŠ æ°¯æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="MainCL_Ediff">
    </div>
    <div class="diff-item">
      <label>6ç³»åˆ—ä¸»åŠ æ°¯æµé‡è®¡åº•æ•°å·®</label>
      <input type="number" id="MainCL_Fdiff">
    </div>
  </div>

  <button class="btn btn-primary" style="width: 100%; margin-top: 16px;" onclick="do_CLcal()">
    ğŸ§® è®¡ç®—åŠ æ°¯é‡
  </button>

  <div class="result-section">
    <h3>ğŸ“Š è®¡ç®—ç»“æœ</h3>
    <textarea id="result_" readonly></textarea>
    <button class="btn btn-primary" style="width: 100%; margin-top: 12px;" onclick="copy_()">
      ğŸ“‹ å¤åˆ¶åŠ æ°¯æ•°æ®
    </button>
  </div>
</div>
```

  </div>

  <div class="footer">
    åŠ è¯åŠ æ°¯è®¡ç®—ç³»ç»Ÿ v2.0 | æ•°æ®è‡ªåŠ¨ä¿å­˜
  </div>
</div>

<script>
// è‡ªåŠ¨ä¿å­˜å’ŒåŠ è½½æ•°æ®
(function() {
  const els = document.querySelectorAll('input, textarea');
  els.forEach(e => {
    const v = localStorage.getItem(e.id);
    if (v !== null) e.value = v;
    e.addEventListener('input', () => localStorage.setItem(e.id, e.value));
  });
  
  // åˆå§‹åŒ–æ°´é‡åˆ†é…æ¯”ä¾‹ï¼ˆå¦‚æœæ²¡æœ‰ä¿å­˜è¿‡ï¼Œé»˜è®¤25%ï¼‰
  if (!localStorage.getItem('water_ratio_51')) {
    localStorage.setItem('water_ratio_51', '0.25');
    localStorage.setItem('water_ratio_52', '0.25');
    localStorage.setItem('water_ratio_61', '0.25');
    localStorage.setItem('water_ratio_62', '0.25');
  }
})();

// 56ç³»æ°´é‡å˜åŒ–æ—¶ï¼ŒæŒ‰æ¯”ä¾‹è‡ªåŠ¨åˆ†é…åˆ°4ä¸ªç³»åˆ—
document.getElementById('56').addEventListener('input', function() {
  const total = parseFloat(this.value) || 0;
  
  // è¯»å–ä¿å­˜çš„æ¯”ä¾‹
  const ratio51 = parseFloat(localStorage.getItem('water_ratio_51')) || 0.25;
  const ratio52 = parseFloat(localStorage.getItem('water_ratio_52')) || 0.25;
  const ratio61 = parseFloat(localStorage.getItem('water_ratio_61')) || 0.25;
  const ratio62 = parseFloat(localStorage.getItem('water_ratio_62')) || 0.25;
  
  // æŒ‰æ¯”ä¾‹åˆ†é…
  document.getElementById('water_51').value = Math.round(total * ratio51);
  document.getElementById('water_52').value = Math.round(total * ratio52);
  document.getElementById('water_61').value = Math.round(total * ratio61);
  document.getElementById('water_62').value = Math.round(total * ratio62);
  
  // ä¿å­˜åˆ†é…åçš„å€¼
  localStorage.setItem('water_51', document.getElementById('water_51').value);
  localStorage.setItem('water_52', document.getElementById('water_52').value);
  localStorage.setItem('water_61', document.getElementById('water_61').value);
  localStorage.setItem('water_62', document.getElementById('water_62').value);
});

// æ‰‹åŠ¨ä¿®æ”¹æŸä¸ªç³»åˆ—æ°´é‡æ—¶ï¼Œé‡æ–°è®¡ç®—æ¯”ä¾‹å¹¶ä¿å­˜
function updateWaterRatio() {
  const w51 = parseFloat(document.getElementById('water_51').value) || 0;
  const w52 = parseFloat(document.getElementById('water_52').value) || 0;
  const w61 = parseFloat(document.getElementById('water_61').value) || 0;
  const w62 = parseFloat(document.getElementById('water_62').value) || 0;
  const total = w51 + w52 + w61 + w62;
  
  if (total > 0) {
    // è®¡ç®—æ–°æ¯”ä¾‹
    localStorage.setItem('water_ratio_51', (w51 / total).toFixed(4));
    localStorage.setItem('water_ratio_52', (w52 / total).toFixed(4));
    localStorage.setItem('water_ratio_61', (w61 / total).toFixed(4));
    localStorage.setItem('water_ratio_62', (w62 / total).toFixed(4));
    
    // åŒæ­¥æ›´æ–°56ç³»æ€»æ°´é‡
    document.getElementById('56').value = Math.round(total);
    localStorage.setItem('56', Math.round(total));
  }
}

// ç›‘å¬4ä¸ªæ°´é‡è°ƒèŠ‚æ¡†çš„å˜åŒ–
['water_51', 'water_52', 'water_61', 'water_62'].forEach(id => {
  document.getElementById(id).addEventListener('input', updateWaterRatio);
});

// åŠ è¯è®¡ç®—ï¼ˆä½¿ç”¨ç²¾ç¡®çš„å„ç³»åˆ—æ°´é‡ï¼‰
function do_cal() {
  var ab = parseInt(document.getElementById("12").value);
  var cd = parseInt(document.getElementById("34").value);
  
  // ä½¿ç”¨ç²¾ç¡®çš„å„ç³»åˆ—æ°´é‡
  var w51 = parseInt(document.getElementById("water_51").value) || 0;
  var w52 = parseInt(document.getElementById("water_52").value) || 0;
  var w61 = parseInt(document.getElementById("water_61").value) || 0;
  var w62 = parseInt(document.getElementById("water_62").value) || 0;

  var hn_concen = parseFloat(document.getElementById("hn_con").value) / 100;
  var hn_concen2 = parseFloat(document.getElementById("hn_con2").value) / 100;
  var zn_concen = parseFloat(document.getElementById("zn_con").value) / 100;
  var zn_concen2 = parseFloat(document.getElementById("zn_con2").value) / 100;

  var hn_adiff = parseInt(document.getElementById("HN_adiff").value);
  var hn_bdiff = parseInt(document.getElementById("HN_bdiff").value);
  var hn_cdiff = parseInt(document.getElementById("HN_cdiff").value);
  var hn_ddiff = parseInt(document.getElementById("HN_ddiff").value);
  var hn_ediff1 = parseInt(document.getElementById("HN_ediff1").value);
  var hn_ediff2 = parseInt(document.getElementById("HN_ediff2").value);
  var hn_fdiff1 = parseInt(document.getElementById("HN_fdiff1").value);
  var hn_fdiff2 = parseInt(document.getElementById("HN_fdiff2").value);

  var zn_adiff = parseInt(document.getElementById("ZN_adiff").value);
  var zn_bdiff = parseInt(document.getElementById("ZN_bdiff").value);
  var zn_cdiff = parseInt(document.getElementById("ZN_cdiff").value);
  var zn_ddiff = parseInt(document.getElementById("ZN_ddiff").value);
  var zn_ediff1 = parseInt(document.getElementById("ZN_ediff1").value);
  var zn_ediff2 = parseInt(document.getElementById("ZN_ediff2").value);
  var zn_fdiff1 = parseInt(document.getElementById("ZN_fdiff1").value);
  var zn_fdiff2 = parseInt(document.getElementById("ZN_fdiff2").value);

  var hn_a = (hn_adiff * hn_concen * 2 * 10000 / ab).toFixed(2);
  var hn_b = (hn_bdiff * hn_concen * 2 * 10000 / ab).toFixed(2);
  var hn_c = (hn_cdiff * hn_concen * 2 * 10000 / cd).toFixed(2);
  var hn_d = (hn_ddiff * hn_concen * 2 * 10000 / cd).toFixed(2);
  
  // ä½¿ç”¨å„ç³»åˆ—ç²¾ç¡®æ°´é‡è®¡ç®—ï¼ˆå»æ‰ç³»æ•°4ï¼Œå› ä¸ºåˆ†æ¯å·²æ˜¯ç²¾ç¡®æ°´é‡ï¼‰
  var hn_e1 = (hn_ediff1 * hn_concen2 * 10000 / w51).toFixed(2);
  var hn_e2 = (hn_ediff2 * hn_concen2 * 10000 / w52).toFixed(2);
  var hn_f1 = (hn_fdiff1 * hn_concen2 * 10000 / w61).toFixed(2);
  var hn_f2 = (hn_fdiff2 * hn_concen2 * 10000 / w62).toFixed(2);

  var zn_a = (zn_adiff * zn_concen * 2 * 10000 / ab).toFixed(2);
  var zn_b = (zn_bdiff * zn_concen * 2 * 10000 / ab).toFixed(2);
  var zn_c = (zn_cdiff * zn_concen * 2 * 10000 / cd).toFixed(2);
  var zn_d = (zn_ddiff * zn_concen * 2 * 10000 / cd).toFixed(2);
  var zn_e1 = (zn_ediff1 * zn_concen2 * 10000 / w51).toFixed(2);
  var zn_e2 = (zn_ediff2 * zn_concen2 * 10000 / w52).toFixed(2);
  var zn_f1 = (zn_fdiff1 * zn_concen2 * 10000 / w61).toFixed(2);
  var zn_f2 = (zn_fdiff2 * zn_concen2 * 10000 / w62).toFixed(2);

  document.getElementById("result").value = "ä¸€æœŸï¼š\n" + hn_a + " " + hn_b + " " + hn_c + " " + hn_d + "\n" + zn_a + " " + zn_b + " " + zn_c + " " + zn_d + "\n" + "äºŒæœŸï¼š\n" + hn_e1 + " " + hn_e2 + " " + hn_f1 + " " + hn_f2 + "\n" + zn_e1 + " " + zn_e2 + " " + zn_f1 + " " + zn_f2;
}

// åŠ æ°¯è®¡ç®—ï¼ˆä½¿ç”¨ç²¾ç¡®çš„å„ç³»åˆ—æ°´é‡ï¼‰
function do_CLcal() {
  var ab = parseInt(document.getElementById("12").value);
  var cd = parseInt(document.getElementById("34").value);
  
  // ä½¿ç”¨ç²¾ç¡®çš„å„ç³»åˆ—æ°´é‡
  var w51 = parseInt(document.getElementById("water_51").value) || 0;
  var w52 = parseInt(document.getElementById("water_52").value) || 0;
  var w61 = parseInt(document.getElementById("water_61").value) || 0;
  var w62 = parseInt(document.getElementById("water_62").value) || 0;
  
  // è®¡ç®—5ç³»å’Œ6ç³»æ€»æ°´é‡
  var e = w51 + w52;
  var f = w61 + w62;

  var effCL1 = parseFloat(document.getElementById("effCL1").value);
  var effCL2 = parseFloat(document.getElementById("effCL2").value);
  var openAdd = document.getElementById('isAdd').checked;

  var preCL_ABdiff = parseInt(document.getElementById("PreCL_ABdiff").value);
  var preCL_CDdiff = parseInt(document.getElementById("PreCL_CDdiff").value);
  var preCL_Ediff = parseInt(document.getElementById("PreCL_Ediff").value);
  var preCL_Fdiff = parseInt(document.getElementById("PreCL_Fdiff").value);

  var mainCL_ABdiff = parseInt(document.getElementById("MainCL_ABdiff").value);
  var mainCL_CDdiff = parseInt(document.getElementById("MainCL_CDdiff").value);
  var mainCL_Ediff = parseInt(document.getElementById("MainCL_Ediff").value);
  var mainCL_Fdiff = parseInt(document.getElementById("MainCL_Fdiff").value);

  var addCL_Adiff = parseInt(document.getElementById("addCL_Adiff").value);
  var addCL_Bdiff = parseInt(document.getElementById("addCL_Bdiff").value);
  var addCL_Cdiff = parseInt(document.getElementById("addCL_Cdiff").value);
  var addCL_Ddiff = parseInt(document.getElementById("addCL_Ddiff").value);

  var preCL_AB = (preCL_ABdiff * effCL1 * 0.1 * 1000 / ab).toFixed(2);
  var preCL_CD = (preCL_CDdiff * effCL1 * 0.1 * 1000 / cd).toFixed(2);
  var preCL_E = (preCL_Ediff * effCL2 * 100 / e).toFixed(2);
  var preCL_F = (preCL_Fdiff * effCL2 * 100 / f).toFixed(2);

  var mainCL_AB = (mainCL_ABdiff * effCL1 * 0.1 * 1000 / ab).toFixed(2);
  var mainCL_CD = (mainCL_CDdiff * effCL1 * 0.1 * 1000 / cd).toFixed(2);
  var mainCL_E = (mainCL_Ediff * effCL2 * 100 / e).toFixed(2);
  var mainCL_F = (mainCL_Fdiff * effCL2 * 100 / f).toFixed(2);

  var addCL_A = (addCL_Adiff * effCL1 * 0.1 * 1000 / ab).toFixed(2);
  var addCL_B = (addCL_Bdiff * effCL1 * 0.1 * 1000 / ab).toFixed(2);
  var addCL_C = (addCL_Cdiff * effCL1 * 0.1 * 1000 / cd).toFixed(2);
  var addCL_D = (addCL_Ddiff * effCL1 * 0.1 * 1000 / cd).toFixed(2);

  if (openAdd == true) {
    document.getElementById("result_").value = "å‰åŠ æ°¯ï¼š\n" + preCL_AB + " " + preCL_CD + " " + preCL_E + " " + preCL_F + "\nä¸»åŠ æ°¯ï¼š\n" + mainCL_AB + " " + mainCL_CD + " " + mainCL_E + " " + mainCL_F + "\nè¡¥æ°¯ï¼š\n" + addCL_A + " " + addCL_B + " " + addCL_C + " " + addCL_D;
  } else {
    document.getElementById("result_").value = "å‰åŠ æ°¯ï¼š\n" + preCL_AB + " " + preCL_CD + " " + preCL_E + " " + preCL_F + "\nä¸»åŠ æ°¯ï¼š\n" + mainCL_AB + " " + mainCL_CD + " " + mainCL_E + " " + mainCL_F;
  }
}

// å¤åˆ¶åŠ è¯æ•°æ®
function copy() {
  const textarea = document.getElementById("result");
  textarea.select();
  textarea.setSelectionRange(0, 99999);
  try {
    document.execCommand('copy');
    showToast('âœ… åŠ è¯æ•°æ®å·²å¤åˆ¶');
  } catch (err) {
    showToast('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
  }
}

// å¤åˆ¶åŠ æ°¯æ•°æ®
function copy_() {
  const textarea = document.getElementById("result_");
  textarea.select();
  textarea.setSelectionRange(0, 99999);
  try {
    document.execCommand('copy');
    showToast('âœ… åŠ æ°¯æ•°æ®å·²å¤åˆ¶');
  } catch (err) {
    showToast('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
  }
}

// è¯»å–å¾®ä¿¡ç²˜è´´æ•°æ®
function readCpy() {
  const text = document.getElementById('hiddenTxt').value;
  
  const pattern12 = /(?<=ã€1-2ç³»:\s*)\d+(?=ã€‘)/;
  const pattern34 = /(?<=ã€3-4ç³»:\s*)\d+(?=ã€‘)/;
  const pattern56 = /(?<=ã€5-6ç³»:\s*)\d+(?=ã€‘)/;

  const match12 = text.match(pattern12);
  const match34 = text.match(pattern34);
  const match56 = text.match(pattern56);

  if (match12 && match34 && match56) {
    document.getElementById('12').value = match12[0];
    document.getElementById('34').value = match34[0];
    document.getElementById('56').value = match56[0];
  apply56Split();
    showToast('âœ… è¿›æ°´é‡è¯»å–æˆåŠŸ');
  } else {
    showToast('âŒ è¯»å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®æ ¼å¼');
  }
}

// æ¸…ç©ºç²˜è´´åŒº
function clean() {
  document.getElementById('hiddenTxt').value = '';
  showToast('ğŸ—‘ï¸ å·²æ¸…ç©º');
}

// æ˜¾ç¤ºæç¤ºä¿¡æ¯
function showToast(message) {
  const toast = document.createElement('div');
  toast.className = 'success-toast';
  toast.textContent = message;
  document.body.appendChild(toast);
  
  setTimeout(() => {
    toast.remove();
  }, 2000);
}

function apply56Split() {
  const total56 = parseFloat(document.getElementById('56').value) || 0;
  if (total56 <= 0) return;

  const r51 = parseFloat(localStorage.getItem('water_ratio_51')) || 0.25;
  const r52 = parseFloat(localStorage.getItem('water_ratio_52')) || 0.25;
  const r61 = parseFloat(localStorage.getItem('water_ratio_61')) || 0.25;
  const r62 = parseFloat(localStorage.getItem('water_ratio_62')) || 0.25;

  document.getElementById('water_51').value = Math.round(total56 * r51);
  document.getElementById('water_52').value = Math.round(total56 * r52);
  document.getElementById('water_61').value = Math.round(total56 * r61);
  document.getElementById('water_62').value = Math.round(total56 * r62);
}

</script>

</body>
</html>